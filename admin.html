<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ููุญุฉ ุงูุฅุฏุงุฑุฉ | ููู ุณุชูุงูุช</title>

<link rel="stylesheet" href="css/admin.css">
</head>

<body>

<script>
if(localStorage.getItem("role")!=="admin"){ alert("ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุฃุฏูู"); window.location.href="index.html"; }
</script>

<div class="card">

<h2>ููุญุฉ ุงูุฅุฏุงุฑุฉ | ููู ุณุชูุงูุช</h2>
<button class="logout-btn" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>

<div style="display:flex;gap:10px;margin:15px 0;">
    <div class="stat-box" id="stat_clients">ุฌุงุฑู ุงูุชุญููู...</div>
    <div class="stat-box" id="stat_total">---</div>
    <div class="stat-box" id="stat_last">---</div>
</div>
<button type="button" onclick="openModal('addClientModal')">ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</button>
<h3>ุฅุถุงูุฉ ุนูููุฉ ูุงููุฉ</h3>

<select id="client_select">
    <option value="">ุงุฎุชุฑ ุงูุนููู</option>
</select>


<input id="amount" type="number" placeholder="ุงููุจูุบ">
<select id="type">
    <option value="debit">ุนููู</option>
    <option value="credit">ูู</option>
</select>
<input type="text" style="display:none" autocomplete="username">
<input type="password" style="display:none" autocomplete="new-password">

<input id="note" name="field987" placeholder="ุงูุจูุงู"
       autocomplete="off"
       autofill="off"
       data-lpignore="true"
       autocapitalize="off"
       spellcheck="false">
<button id="addTransBtn" type="button" onclick="addTrans()">ุฅุถุงูุฉ ุงูุนูููุฉ</button>

<p id="msg"></p>
<p id="loading"></p>

<h3>ุขุฎุฑ 3 ุนูููุงุช ููุนููู</h3>
<p id="total_info"></p>

<button type="button" onclick="showAllTransactions()">ุนุฑุถ ูู ุงูุนูููุงุช</button>
<button type="button" onclick="printTransactions()" style="background:#7a39ff;">ุทุจุงุนุฉ PDF</button>

<div class="table-container">
    <table id="transTable"></table>
</div>

<button onclick="showClientsBalances()" style="background:#0b74de">ุนุฑุถ ุฌููุน ุงูุนููุงุก ูุตุงูู ุญุณุงุจุงุชูู</button>


</div>

<!-- ููุฏุงู ุฅุถุงูุฉ ุงูุนููู -->
<div id="addClientModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('addClientModal')">&times;</span>
    <h3>ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</h3>
    <input id="new_name" placeholder="ุงูุงุณู">
 <div class="input-group">
    <input id="new_mobile" type="tel" placeholder="ุฑูู ุงูุฌูุงู">
    <button class="pick-btn" id="pickContact">๐ฑ</button>
</div>
    <input id="new_username" placeholder="ุงุณู ุงููุณุชุฎุฏู">
    <input id="new_password" type="password" placeholder="ูููุฉ ุงููุฑูุฑ">
    <button onclick="addClient()">ุฅุถุงูุฉ ุงูุนููู</button>
    <p id="clientMsg"></p>
  </div>
</div>

<!-- ููุฏุงู ุชุนุฏูู ุงูุนูููุฉ -->
<div id="transModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('transModal')">&times;</span>
    <h3>ุชุนุฏูู ุงูุนูููุฉ</h3>
    <input id="modal_amount" type="number" placeholder="ุงููุจูุบ">
    <select id="modal_type">
        <option value="debit">ุนููู</option>
        <option value="credit">ูู</option>
    </select>
    <input id="modal_note" placeholder="ุงูุจูุงู">
    <div style="display:flex;gap:10px;margin-top:10px;">
        <button onclick="saveTransModal()">ุญูุธ</button>
        <button onclick="deleteTransModal()" style="background:#EF4444">ุญุฐู</button>
        <button onclick="closeModal('transModal')" style="background:#888">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- ููุฏุงู ุงูุนููุงุก -->
<div id="clientsModal" class="modal">
  <div class="modal-body">
      <div style="display:flex;justify-content:space-between">
        <h3>ูุงุฆูุฉ ุงูุนููุงุก ูุตุงูู ุงูุญุณุงุจ</h3>
        <button class="close-btn" onclick="closeModal('clientsModal')" style="background:#EF4444;padding:6px 12px">ุฅุบูุงู</button>
      </div>
      <input id="search_client" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุฑูู ุงูุฌูุงู" oninput="filterClientsTable()" style="margin-top:10px">
      <table id="clientsBalanceTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>ุงูุนููู</th>
                <th>ุงูุฌูุงู</th>
                <th>ุตุงูู ุงูุญุณุงุจ</th>
                <th>ุฅุฌุฑุงุกุงุช</th>
            </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button onclick="printClientsList()" style="background:#0b74de; color:white; margin-top:10px;">ุทุจุงุนุฉ ูุงุฆูุฉ ุงูุนููุงุก</button> 
</div>
    </div>
      </div>
<div id="numberPopup" style="
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    display: none;
    z-index: 9999;
    width: 250px;
    text-align: center;
">
    <h3 style="margin:0 0 10px;">ุงุฎุชุฑ ุงูุฑูู</h3>
    <div id="numbersList"></div>
    <button onclick="closePopup()" style="margin-top:10px;padding:6px 10px;">ุฅูุบุงุก</button>
</div> 
<script src="js/admin.js"></script>
</body>
</html>





